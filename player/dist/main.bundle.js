!function(e){function t(t){for(var r,a,l=t[0],c=t[1],u=t[2],p=0,f=[];p<l.length;p++)a=l[p],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&f.push(o[a][0]),o[a]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);for(s&&s(t);f.length;)f.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],r=!0,l=1;l<n.length;l++){var c=n[l];0!==o[c]&&(r=!1)}r&&(i.splice(t--,1),e=a(a.s=n[0]))}return e}var r={},o={0:0},i=[];function a(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=r,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)a.d(n,r,function(t){return e[t]}.bind(null,r));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="";var l=window.webpackJsonp=window.webpackJsonp||[],c=l.push.bind(l);l.push=t,l=l.slice();for(var u=0;u<l.length;u++)t(l[u]);var s=c;i.push([106,1]),n()}({106:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),i=n(8),a=(n(76),n(66)),l=n(46),c=n(12),u=n(1),s=n.n(u),p=n(57),f=n.n(p),y=n(58),d=n.n(y);function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(e,t){var n=null,r=e.type,o=e.params;n="".concat(window.API_BASE_URL,"/extract"),n+="type=".concat(r);var i=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},o,{},t);return Object.keys(i).forEach((function(e){return n+="&".concat(e,"=").concat(i[e])})),function(e){return"".concat(n,"&url=").concat(encodeURIComponent(e))}}function v(){return!!window.matchMedia&&window.matchMedia("only screen and (max-width: 570px)").matches}function g(e){if(isNaN(e))return"";var t=Math.floor(e/3600),n=Math.floor((e-3600*t)/60),r=Math.floor(e-3600*t-60*n);return t<10&&(t="0"+t),n<10&&(n="0"+n),r<10&&(r="0"+r),t+":"+n+":"+r}var k=50;function w(e){var t=k,n=d()(e,(function(e){return e.path}));return 1==Object.keys(n).length&&e.length>t?e.reduce((function(e,n,r){var o=Math.floor(r/t);return e[o]?e[o].files.push(n):e[o]={name:"".concat(o*t," - ").concat((o+1)*t-1),files:[n]},e}),[]):Object.keys(n).map((function(e){return{name:e,files:n[e]}}))}function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function S(e,t){return!t||"object"!==O(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function P(e,t){return(P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var _=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=S(this,j(t).call(this,e,n))).setTrackWidthState=function(){r.track&&r.setState({trackWidth:r.track.offsetWidth})},r.handleSeekEnd=function(e){var t=r.props,n=t.onSeekTime,o=t.onSeekEnd,i=r.calcTime(e);n(null),o(i)},r.handleStartHover=function(e){var t=r.calcTime(e);r.props.onSeekTime(t)},r.handleEndHover=function(){r.props.onSeekTime(null)},r.state={trackWidth:0},r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&P(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){this.setTrackWidthState(),window.addEventListener("resize",this.setTrackWidthState)}},{key:"calcTime",value:function(e){var t=this.state.trackWidth;return this.props.duration*(((e.touches?e.touches[0].pageX:e.pageX)-this.track.getBoundingClientRect().left)/t)}},{key:"getPositionStyle",value:function(e,t){return e?{transform:"scaleX("+e/t+")"}:{transform:"scaleX(0)"}}},{key:"render",value:function(){var e=this,t=this.props,n=t.buffered,r=t.currentTime,i=t.duration,a=t.seekTime,l=null!=a&&a<r?a:r;return o.a.createElement("div",{className:"ui-video-seek-slider"},o.a.createElement("div",{className:null!=a?"track active":"track",ref:function(t){return e.track=t},onPointerDown:this.handleSeekEnd,onMouseMove:v()?null:this.handleStartHover,onMouseLeave:v()?null:this.handleEndHover},o.a.createElement("div",{className:"main"},o.a.createElement("div",{className:"buffered",style:this.getPositionStyle(n,i)}),o.a.createElement("div",{className:"connect",style:this.getPositionStyle(l,i)}),null!=a&&o.a.createElement("div",{className:"seek-hover",style:this.getPositionStyle(a,i)}),o.a.createElement("div",{className:"time-indicator shadow-border"},g(a||r)," / ",g(i)))))}}])&&E(n.prototype,r),i&&E(n,i),t}(r.Component);_.defaultProps={duration:100,currentTime:0,buffered:0},_.propTypes={buffered:s.a.number,duration:s.a.number,currentTime:s.a.number,seekTime:s.a.number,onSeekTime:s.a.func.isRequired,onSeekEnd:s.a.func.isRequired};var T,x=_,C=(n(84),n(136)),M=n(131),R=n(128),F=n(137),A=n(138),D=n(139),z=n(140),L=n(141),N=n(142),V=n(143),U=n(144),I=n(145),W=n(129),q=n(130),H=n(132),B=n(152),G=n(47);function K(e){return(K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function X(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Y(e,t){return!t||"object"!==K(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function J(e){return(J=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Q(e,t){return(Q=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Z=Object(c.c)(T=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Y(this,J(t).call(this,e,n))).handleVolumeUp=function(){return r.changeVolue(1)},r.handleVolumeDown=function(){return r.changeVolue(-1)},r.handleCloseRequest=function(){r.setState({anchorEl:null})},r.toggleVolumePopup=function(e){var t=e.currentTarget;r.setState((function(e){return{anchorEl:e.anchorEl?null:t}}))},r.state={anchorEl:null},r}var n,i,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Q(e,t)}(t,e),n=t,(i=[{key:"changeVolue",value:function(e){var t=this.props.device,n=(Math.ceil(15*t.volume)+e)/15;t.setVolume(Math.max(Math.min(n,1),0))}},{key:"render",value:function(){var e=this.props.device.volume,t=this.state.anchorEl;return o.a.createElement(r.Fragment,null,o.a.createElement(R.a,{onClick:this.toggleVolumePopup},0==e&&o.a.createElement(W.a,null),e>0&&o.a.createElement(q.a,null)),o.a.createElement(B.a,{anchorEl:t,anchorOrigin:{vertical:"top",horizontal:"center"},transformOrigin:{vertical:"bottom",horizontal:"left"},open:null!=t,onClose:this.handleCloseRequest},o.a.createElement(M.a,null,o.a.createElement("div",{className:"sound-control__mobile"},o.a.createElement(R.a,{onClick:this.handleVolumeDown},o.a.createElement(H.a,null)),o.a.createElement(G.a,{variant:"body2",align:"center"},Math.ceil(15*e)),o.a.createElement(R.a,{onClick:this.handleVolumeUp},o.a.createElement(q.a,null))))))}}])&&X(n.prototype,i),a&&X(n,a),t}(r.Component))||T;Z.propTypes={device:s.a.object.isRequired};var $,ee=Z,te=n(153);function ne(e){return(ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function re(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function oe(e,t){return!t||"object"!==ne(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ie(e){return(ie=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ae(e,t){return(ae=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var le=Object(c.c)($=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=oe(this,ie(t).call(this,e,n))).handleVolumDown=function(){r.props.device.setVolume(0)},r.handleVolumUp=function(){r.props.device.setVolume(1)},r.handleVolume=function(e,t){r.props.device.setVolume(t/100)},r}var n,i,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ae(e,t)}(t,e),n=t,(i=[{key:"render",value:function(){var e=this.props.device.volume;return o.a.createElement(r.Fragment,null,o.a.createElement(R.a,{onClick:this.handleVolumDown},o.a.createElement(H.a,null)),o.a.createElement(te.a,{className:"sound-control__slider ",value:100*e,onChange:this.handleVolume}),o.a.createElement(R.a,{onClick:this.handleVolumUp},o.a.createElement(q.a,null)))}}])&&re(n.prototype,i),a&&re(n,a),t}(r.Component))||$;le.propTypes={device:s.a.object.isRequired};var ce,ue=le,se=n(154),pe=n(135),fe=n(133);function ye(e){return(ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function de(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function he(e,t){return!t||"object"!==ye(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function be(e){return(be=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function me(e,t){return(me=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ve=Object(c.c)(ce=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=he(this,be(t).call(this,e,n))).handleClick=function(e){r.setState({anchorEl:e.currentTarget})},r.handleClose=function(){r.setState({anchorEl:null})},r.selectTrack=function(e){r.props.device.audioTrack=e,r.setState({anchorEl:null})},r.state={anchorEl:null},r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&me(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this,t=this.state.anchorEl,n=this.props.device,r=n.audioTrack,i=n.audioTracks;return o.a.createElement("span",null,o.a.createElement(R.a,{onClick:this.handleClick},o.a.createElement(fe.a,null)),o.a.createElement(se.a,{id:"simple-menu",anchorEl:t,keepMounted:!0,open:Boolean(t),onClose:this.handleClose},i.map((function(t){var n=t.id,i=t.name;return o.a.createElement(pe.a,{key:n,selected:n==r,onClick:function(){return e.selectTrack(n)}},i)}))))}}])&&de(n.prototype,r),i&&de(n,i),t}(r.Component))||ce;ve.propTypes={device:s.a.object.isRequired};var ge,ke=ve;function we(e){return(we="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Oe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ee(e,t){return!t||"object"!==we(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Se(e){return(Se=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function je(e,t){return(je=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Pe=Object(c.c)(ge=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Ee(this,Se(t).apply(this,arguments))}var n,i,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&je(e,t)}(t,e),n=t,(i=[{key:"render",value:function(){var e=this.props,t=e.onPlaylistToggle,n=e.onFullScreenToggle,i=e.fullScreen,a=e.device,l=e.onPrev,c=e.onNext,u=a.isLocal(),s=a.currentFileIndex,p=a.playlist.files,f=a.shuffle,y=v(),d=a.audioTracks.length>1;return o.a.createElement(C.a,{direction:"up",in:!0,mountOnEnter:!0,unmountOnExit:!0},o.a.createElement(M.a,{elevation:0,square:!0,className:"player-controls"},o.a.createElement(x,{buffered:a.buffered,currentTime:a.currentTime,seekTime:a.seekTime,duration:a.duration,onSeekEnd:function(e){return a.seek(e)},onSeekTime:function(e){return a.seeking(e)}}),o.a.createElement("div",{className:"player-controls__panel"},o.a.createElement("div",{className:"player-controls__panel-section"},0!=s&&o.a.createElement(R.a,{onClick:l},o.a.createElement(F.a,null)),!a.isPlaying&&o.a.createElement(R.a,{onClick:function(){return a.resume()}},o.a.createElement(A.a,null)),a.isPlaying&&o.a.createElement(R.a,{onClick:function(){return a.pause()}},o.a.createElement(D.a,null)),s<p.length-1&&o.a.createElement(R.a,{onClick:c},o.a.createElement(z.a,null)),p.length>1&&o.a.createElement(r.Fragment,null,f&&o.a.createElement(R.a,{onClick:function(){return a.setShuffle(!1)}},o.a.createElement(L.a,null)),!f&&o.a.createElement(R.a,{onClick:function(){return a.setShuffle(!0)}},o.a.createElement(N.a,null))),y&&o.a.createElement(ee,{device:a}),!y&&o.a.createElement(ue,{device:a}),d&&o.a.createElement(ke,{device:a})),o.a.createElement("div",{className:"player-controls__panel-section"},u&&o.a.createElement(R.a,{onClick:function(){return n()}},!i&&o.a.createElement(V.a,null),i&&o.a.createElement(U.a,null)),o.a.createElement(R.a,{onClick:function(){return t()}},o.a.createElement(I.a,null))))))}}])&&Oe(n.prototype,i),a&&Oe(n,a),t}(r.Component))||ge;Pe.propTypes={device:s.a.object.isRequired,onPlaylistToggle:s.a.func.isRequired,onFullScreenToggle:s.a.func,onPrev:s.a.func.isRequired,onNext:s.a.func.isRequired,fullScreen:s.a.bool};var _e,Te=Pe,xe=n(134),Ce=n(107),Me=n(146),Re=n(45),Fe=n(62),Ae=n.n(Fe),De=n(49);function ze(e){return(ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Le(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ne(e,t){return!t||"object"!==ze(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ve(e){return(Ve=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ue(e,t){return(Ue=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ie=Object(c.c)(_e=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Ne(this,Ve(t).call(this,e,n))).handleOpenGroupsMenu=function(e){r.setState({anchorEl:e.currentTarget})},r.handleCloseGroupsMenu=function(){r.setState({anchorEl:null})},r.handleSelectGroup=function(e){r.setState({selectedGroup:e,anchorEl:null})},r.getGroups=Object(De.a)(w),r.getFileGroup=Object(De.a)((function(e,t){return t.find((function(t){return null!=t.files.find((function(t){return t.id==e}))}))})),r.state={selectedGroup:null,anchorEl:null},r}var n,i,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ue(e,t)}(t,e),n=t,(i=[{key:"render",value:function(){var e=this,t=this.state,n=t.selectedGroup,i=t.anchorEl,a=this.props,l=a.device,c=l.playlist,u=l.currentFileIndex,s=a.open,p=a.onFileSelected,f=c.files,y=this.getGroups(f),d=f[u].id,h=this.getFileGroup(d,y);n=n||h;var b=y.length>1?n.files:f;return o.a.createElement(C.a,{direction:"left",in:s,mountOnEnter:!0,unmountOnExit:!0},o.a.createElement(M.a,{elevation:12,square:!0,className:"player__file-list"},y.length>1&&o.a.createElement(r.Fragment,null,o.a.createElement(xe.a,null,o.a.createElement(Ce.a,{button:!0,style:{background:Re.a[600]},onClick:this.handleOpenGroupsMenu},o.a.createElement(Me.a,{primary:n.name}),o.a.createElement(Ae.a,{nativeColor:"white"}))),o.a.createElement(se.a,{anchorEl:i,open:Boolean(i),onClose:this.handleCloseGroupsMenu},y.map((function(t){return o.a.createElement(pe.a,{key:t.name,style:t.name==n.name?{background:Re.a[600]}:{},onClick:function(){return e.handleSelectGroup(t)}},o.a.createElement("span",{style:{wordBreak:"break-all",whiteSpace:"normal"}},t.name))})))),o.a.createElement(xe.a,null,b.map((function(e){var t=d==e.id?{background:Re.a[600]}:{};return o.a.createElement(Ce.a,{button:!0,key:e.id,style:t,onClick:function(){return p(f.findIndex((function(t){return t.id==e.id})))}},o.a.createElement(Me.a,{primary:o.a.createElement("span",{style:{wordBreak:"break-all"}},e.name)}))})))))}}])&&Le(n.prototype,i),a&&Le(n,a),t}(r.Component))||_e;Ie.propTypes={device:s.a.object.isRequired,open:s.a.bool,onFileSelected:s.a.func.isRequired};var We=Ie;function qe(e){return(qe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function He(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Be(e,t){return!t||"object"!==qe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ge(e){return(Ge=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ke(e,t){return(Ke=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Xe=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Be(this,Ge(t).apply(this,arguments))}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ke(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props.title;return o.a.createElement("div",{className:"player__title"},o.a.createElement(G.a,{variant:"h6",style:{wordBreak:"break-all",marginLeft:"10px"}},e))}}])&&He(n.prototype,r),i&&He(n,i),t}(r.Component);Xe.propTypes={title:s.a.string};var Ye=Xe,Je=n(65),Qe=n(23),Ze=n.n(Qe),$e=n(3);function et(e){return(et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function nt(e,t){return!t||"object"!==et(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function rt(e){return(rt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ot(e,t){return(ot=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var it=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),nt(this,rt(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ot(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){var e=this;this.disposeReactions=function(){var e=Array.from(arguments);return function(){e.forEach((function(e){e.call()}))}}(Object($e.m)((function(){return e.props.device.isPlaying}),this.onPlayPause.bind(this)),Object($e.m)((function(){return e.props.device.seekTo}),this.onSeek.bind(this)),Object($e.m)((function(){return e.props.device.isMuted}),this.onMute.bind(this)),Object($e.m)((function(){return e.props.device.volume}),this.onVolume.bind(this)),Object($e.m)((function(){return e.props.device.source}),(function(t){return e.onSource(t,e.props.device.currentTime)})),Object($e.m)((function(){return e.props.device.audioTrack}),(function(t){return e.onAudioTrack(t)})))}},{key:"onPlayPause",value:function(e){}},{key:"onSeek",value:function(e){}},{key:"onMute",value:function(e){}},{key:"onVolume",value:function(e){}},{key:"onSource",value:function(e){}},{key:"onAudioTrack",value:function(e){}},{key:"componentWillUnmount",value:function(){this.disposeReactions()}}])&&tt(n.prototype,r),o&&tt(n,o),t}(r.Component);it.propTypes={device:s.a.object.isRequired,onEnded:s.a.func};var at,lt=it;function ct(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ut(e,t,n){return(ut="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=yt(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function st(e){return(st="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ft(e,t){return!t||"object"!==st(t)&&"function"!=typeof t?dt(e):t}function yt(e){return(yt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function dt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ht(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&bt(e,t)}function bt(e,t){return(bt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var mt,vt=function(e){function t(e){var n;pt(this,t);var r=(n=ft(this,yt(t).call(this,e))).load.bind(dt(n)),o=null;return e.extractor&&(o=m(e.extractor)),n.load=function(e,t,n){if(o){if(e.url.startsWith(window.location.origin)){var i=decodeURIComponent(e.frag.baseurl.split("&url=")[1]);e.url=new URL(e.frag.relurl,i).toString()}e.url=o(e.url)}r(e,t,n)},n}return ht(t,e),t}(Ze.a.DefaultConfig.loader),gt=Object(c.c)(at=function(e){function t(e,n){var r;return pt(this,t),(r=ft(this,yt(t).call(this,e,n))).restoreVideoState=function(){var e=dt(r),t=e.video,n=e.props.device;t.currentTime=n.currentTime,t.muted=n.isMuted,t.volume=n.volume,n.isPlaying?t.play():t.pause()},r.handleLoadStart=function(){var e=r.props.device;e.setLoading(!0),e.setError(null)},r.handleError=function(){var e=dt(r),t=e.props.device,n=e.alternativeUrls;if(n&&n.length>0)return r.setVideoSource(n.pop()),void r.restoreVideoState();r.hlsMode||!r.isHlsAvaliable()?(t.setError("Could not play media"),t.setLoading(!1)):r.startHlsVideo()},r.handleLoadedMetadata=function(){var e=r.props.device;r.handleUpdate(),r.handleResize(),e.setError(null),e.setLoading(!1)},r.handleResize=function(){r.container&&(r.video.className="scale_".concat(r.getVideoScale()))},r.handleWaiting=function(){r.props.device.setLoading(!0)},r.handlePlay=function(){r.props.device.setLoading(!1)},r.handleUpdate=function(){var e=r.props.device,t=dt(r).video,n=t.buffered,o=t.duration,i=t.currentTime;e.onUpdate({duration:o,buffered:n.length>0?n.end(n.length-1):0,currentTime:i})},r.handleEnded=function(){var e=r.props,t=e.device,n=e.onEnded;t.pause(),n()},r.state={videoScale:"hor"},r}var n,r,i;return ht(t,e),n=t,(r=[{key:"componentDidMount",value:function(){ut(yt(t.prototype),"componentDidMount",this).call(this),this.initVideo()}},{key:"componentWillUnmount",value:function(){ut(yt(t.prototype),"componentWillUnmount",this).call(this),this.disposeHls()}},{key:"onPlayPause",value:function(e){e?this.video.play():this.video.pause()}},{key:"onSeek",value:function(e){this.video.currentTime=e}},{key:"onMute",value:function(e){this.video.muted=e}},{key:"onVolume",value:function(e){this.video.volume=e}},{key:"onSource",value:function(){this.initVideo()}},{key:"onAudioTrack",value:function(e){this.hls&&(this.hls.audioTrack=e)}},{key:"disposeHls",value:function(){this.hls&&(this.hls.stopLoad(),this.hls.detachMedia(),this.hls.destroy()),this.hlsMode=!1,this.keepAliveInterval&&clearInterval(this.keepAliveInterval)}},{key:"initVideo",value:function(){var e=this.props.device.source,t=e.browserUrl,n=e.url,r=e.manifestUrl,o=e.alternativeUrls;this.alternativeUrls=o;var i=this.video;if(this.disposeHls(),t)i.src=t;else if(n)this.setVideoSource(n);else{if(!r){var a=this.props.device;return a.setLoading(!1),void a.setError("No suitable video source")}this.startHlsVideo()}this.restoreVideoState()}},{key:"setVideoSource",value:function(e){var t=this.props.device.source.extractor,n=this.video;n.src=t?m(t)(e):e}},{key:"startHlsVideo",value:function(){var e=this;this.hlsMode=!0;var t=this.props.device,n=t.source,r=new Ze.a({startPosition:t.currentTime,xhrSetup:function(e){e.timeout=0},extractor:n.extractor,loader:vt});r.attachMedia(this.video),r.on(Ze.a.Events.MANIFEST_PARSED,(function(){e.restoreVideoState(),r.audioTracks&&r.audioTracks.length>1&&t.setAudioTracks(r.audioTracks.map((function(e){return{id:e.id,name:e.name}})))})),r.on(Ze.a.Events.ERROR,(function(e,n){if(n.fatal)switch(n.type){case Ze.a.ErrorTypes.NETWORK_ERROR:console.log("fatal network error encountered, try to recover"),r.startLoad();break;case Ze.a.ErrorTypes.MEDIA_ERROR:console.log("fatal media error encountered, try to recover"),r.recoverMediaError();break;default:t.setError("Can`t play media"),r.destroy()}})),r.loadSource(n.manifestUrl),this.hls=r}},{key:"isHlsAvaliable",value:function(){return this.props.device.source.manifestUrl&&Ze.a.isSupported()}},{key:"getVideoScale",value:function(){return this.video.videoWidth/this.video.videoHeight<this.container.clientWidth/this.container.clientHeight?"vert":"hor"}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"player__player-screen",ref:function(t){return e.container=t}},o.a.createElement(Je.a,{skipOnMount:!0,handleWidth:!0,handleHeight:!0,onResize:this.handleResize}),o.a.createElement("video",{ref:function(t){return e.video=t},onDurationChange:this.handleUpdate,onProgress:this.handleUpdate,onTimeUpdate:this.handleUpdate,onLoadedMetadata:this.handleLoadedMetadata,onEnded:this.handleEnded,onLoadStart:this.handleLoadStart,onWaiting:this.handleWaiting,onPlaying:this.handlePlay,onError:this.handleError}))}}])&&ct(n.prototype,r),i&&ct(n,i),t}(lt))||at,kt=n(147),wt=n(148),Ot=n(149);function Et(e){return(Et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function St(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function jt(e,t){return!t||"object"!==Et(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Pt(e){return(Pt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _t(e,t){return(_t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Tt=Object(c.c)(mt=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=jt(this,Pt(t).call(this,e,n))).handleFastFroward=function(e){r.startSeeking(e,"ff")},r.handleFastRewind=function(e){r.startSeeking(e,"fr")},r.startSeeking=function(e,t){e.stopPropagation(),r.cleanUp(),window.addEventListener("touchend",r.handleSeekEnd),window.addEventListener("touchmove",r.handlePreventScroll,{passive:!1}),window.addEventListener("touchcancel",r.handleSeekEnd),window.addEventListener("mouseup",r.handleSeekEnd);var n=r.props.device;n.seeking(n.currentTime),n.pause();var o=n.currentTime;r.lastTs=Date.now(),r.accTime=0,r.setState({seekMode:t,time:o},(function(){r.stepInterval=setInterval(r.seekStep,100)}))},r.handleSeekEnd=function(){r.props.device.play(r.targetTime),r.setState({seekMode:null}),r.targetTime=null,r.lastTs=null,r.cleanUp()},r.seekStep=function(){var e=Date.now(),t=(e-r.lastTs)/1e3,n=15;r.accTime>120?n=60:r.accTime>30&&(n=30);var o=r.accTime+Math.floor(t*n),i=r.state.seekMode,a=r.props.device,l=a.currentTime,c=a.duration,u=a.seeking,s="ff"==i?l+o:l-o;s<0||s>c?clearInterval(r.stepInterval):(r.accTime=o,r.lastTs=e,r.targetTime=s,u(s))},r.state={seekMode:null},r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_t(e,t)}(t,e),n=t,(r=[{key:"handlePreventScroll",value:function(e){e.cancelable&&(e.preventDefault(),e.stopImmediatePropagation())}},{key:"componentWillUnmount",value:function(){this.cleanUp()}},{key:"cleanUp",value:function(){window.removeEventListener("touchend",this.handleSeekEnd),window.removeEventListener("touchmove",this.handlePreventScroll),window.removeEventListener("touchcancel",this.handleSeekEnd),window.removeEventListener("mouseup",this.handleSeekEnd),clearInterval(this.stepInterval)}},{key:"render",value:function(){var e=this.state.seekMode,t=this.props,n=t.device,r=n.isPlaying,i=n.isLoading,a=t.onClick;return o.a.createElement("div",{className:"player__pause-zone ".concat(r||i?"":"player__pause-cover"),onMouseDown:a},o.a.createElement("div",{className:"playback-skip backward",onTouchStart:this.handleFastRewind,onMouseDown:this.handleFastRewind}),o.a.createElement("div",{className:"playback-skip__indicator"},"fr"==e&&o.a.createElement(kt.a,{className:"center",fontSize:"inherit"}),"ff"==e&&o.a.createElement(wt.a,{className:"center",fontSize:"inherit"}),!e&&!r&&o.a.createElement(Ot.a,{className:"center",fontSize:"inherit"})),o.a.createElement("div",{className:"playback-skip forward",onTouchStart:this.handleFastFroward,onMouseDown:this.handleFastFroward}))}}])&&St(n.prototype,r),i&&St(n,i),t}(r.Component))||mt;Tt.propTypes={device:s.a.object.isRequired,onClick:s.a.func.isRequired};var xt=Tt;function Ct(e){return(Ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Mt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Rt(e,t){return!t||"object"!==Ct(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ft(e){return(Ft=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function At(e,t){return(At=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Dt=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Rt(this,Ft(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&At(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.must,n=e.mustNot,r=e.children,o=!0,i=!0,a=!1,l=void 0;try{for(var c,u=t[Symbol.iterator]();!(i=(c=u.next()).done);i=!0)if(!c.value){o=!1;break}}catch(e){a=!0,l=e}finally{try{i||null==u.return||u.return()}finally{if(a)throw l}}if(o){var s=!0,p=!1,f=void 0;try{for(var y,d=n[Symbol.iterator]();!(s=(y=d.next()).done);s=!0)if(y.value){o=!1;break}}catch(e){p=!0,f=e}finally{try{s||null==d.return||d.return()}finally{if(p)throw f}}}return o?r:null}}])&&Mt(n.prototype,r),o&&Mt(n,o),t}(o.a.Component);Dt.defaultProps={must:[],mustNot:[]},Dt.propTypes={must:s.a.array,mustNot:s.a.array,children:s.a.oneOfType([s.a.arrayOf(s.a.node),s.a.node]).isRequired};var zt,Lt=Dt,Nt=n(150);function Vt(e){return(Vt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ut(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function It(e){return(It=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Wt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function qt(e,t){return(qt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ht=Object(c.b)("playerStore")(zt=Object(c.c)(zt=function(e){function t(e,n){var r,o,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,i=It(t).call(this,e,n),(r=!i||"object"!==Vt(i)&&"function"!=typeof i?Wt(o):i).handleTogglePlayList=function(){r.setState((function(e){return{playlistOpen:!e.playlistOpen}}))},r.handleClick=function(){var e=Wt(r).props.playerStore.device;e.isPlaying?e.pause():e.play()},r.handleIdle=function(e){r.setState({idle:e})},r.handleSelectFile=function(e){r.props.playerStore.switchFile(e),v()&&r.setState({playlistOpen:!1})},r.handleToggleFullscreen=function(){var e=!r.state.fullScreen;r.setState({fullScreen:e})},r.handleSetFullScreen=function(e){r.setState({fullScreen:e}),e&&r.setState({idle:!0})},r.handleKeyUp=function(e){var t=Wt(r).props.playerStore.device,n=e.ctrlKey?10:e.shiftKey?60:30;32==e.which?t.isPlaying?t.pause():t.play():37==e.which?t.skip(-n):39==e.which&&t.skip(n)},r.handleActivity=function(){var e=Wt(r),t=e.state.idle,n=e.idleTimeout;clearTimeout(n),r.setIdleTimeout(),t&&r.setState({idle:!1})},r.state={playlistOpen:!1,idle:!1,fullScreen:!1},r.handleActivity=r.handleActivity.bind(Wt(r)),r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&qt(e,t)}(t,e),n=t,(r=[{key:"setIdleTimeout",value:function(){var e=this;this.idleTimeout=setTimeout((function(){return e.setState({idle:!0})}),3e3)}},{key:"componentWillUnmount",value:function(){var e=this,t=this.idleTimeout;clearTimeout(t),["mousemove","mousedown","keydown","touchstart","scroll"].forEach((function(t){return window.removeEventListener(t,e.handleActivity)})),window.removeEventListener("keyup",this.handleKeyUp)}},{key:"componentDidMount",value:function(){var e=this;this.setIdleTimeout(),["mousemove","mousedown","keydown","touchstart","scroll"].forEach((function(t){return window.addEventListener(t,e.handleActivity)})),window.addEventListener("keyup",this.handleKeyUp)}},{key:"render",value:function(){var e=this.props.playerStore,t=this.state,n=t.playlistOpen,r=t.idle,i=t.fullScreen,a=e.device,l=a.isLoading,c=a.error,u=a.seekTime,s=r&&null==u;return o.a.createElement(f.a,{enabled:i,onChange:this.handleSetFullScreen},o.a.createElement("div",{className:s?"idle":""},o.a.createElement(Lt,{mustNot:[s]},o.a.createElement(Ye,{title:e.getPlayerTitle()})),o.a.createElement(gt,{device:a,onEnded:e.endFile}),o.a.createElement(Lt,{must:[c]},o.a.createElement(G.a,{className:"center shadow-border",variant:"h4"},c)),o.a.createElement(Lt,{mustNot:[c]},o.a.createElement(Lt,{must:[l]},o.a.createElement("div",{className:"center"},o.a.createElement(Nt.a,{color:"secondary"}))),o.a.createElement(xt,{device:a,onClick:this.handleClick}),o.a.createElement(Lt,{mustNot:[s]},o.a.createElement(We,{open:n,device:a,onFileSelected:this.handleSelectFile}),o.a.createElement(Te,{fullScreen:i,device:a,onNext:function(){return e.nextFile()},onPrev:function(){return e.prevFile()},onPlaylistToggle:this.handleTogglePlayList,onFullScreenToggle:this.handleToggleFullscreen})))))}}])&&Ut(n.prototype,r),i&&Ut(n,i),t}(r.Component))||zt)||zt;Ht.propTypes={playerStore:s.a.object};var Bt=Ht;function Gt(e){return(Gt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Kt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Xt(e,t){return!t||"object"!==Gt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Yt(e){return(Yt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Jt(e,t){return(Jt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Qt,Zt,$t,en,tn,nn,rn,on,an,ln,cn,un,sn,pn,fn,yn,dn,hn,bn,mn,vn,gn,kn,wn,On,En,Sn,jn=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Xt(this,Yt(t).apply(this,arguments))}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Jt(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){return o.a.createElement("div",{className:"screan-content"},o.a.createElement(Bt,null))}}])&&Kt(n.prototype,r),i&&Kt(n,i),t}(r.Component),Pn=n(19),_n=n.n(Pn);function Tn(e){return(Tn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xn(e){return(xn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Cn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Mn(e,t){return(Mn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Rn(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function Fn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function An(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Dn(e,t,n){return t&&An(e.prototype,t),n&&An(e,n),e}function zn(e,t,n,r,o){var i={};return Object.keys(r).forEach((function(e){i[e]=r[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}var Ln=(Qt=$e.d.bound,$t=zn((Zt=function(){function e(){Fn(this,e),Rn(this,"playlist",$t,this),Rn(this,"currentFileIndex",en,this),Rn(this,"currentTime",tn,this),Rn(this,"duration",nn,this),Rn(this,"buffered",rn,this),Rn(this,"isPlaying",on,this),Rn(this,"isLoading",an,this),Rn(this,"error",ln,this),Rn(this,"volume",cn,this),Rn(this,"isMuted",un,this),Rn(this,"audioTracks",sn,this),Rn(this,"audioTrack",pn,this),Rn(this,"shuffle",fn,this),Rn(this,"seekTime",yn,this)}return Dn(e,[{key:"isLocal",value:function(){return!0}},{key:"resume",value:function(){}},{key:"pause",value:function(){}},{key:"play",value:function(e){}},{key:"seek",value:function(e){}},{key:"connect",value:function(){}},{key:"disconnect",value:function(){}},{key:"setVolume",value:function(e){}},{key:"selectFile",value:function(e){}},{key:"setPlaylist",value:function(e,t,n){}},{key:"setShuffle",value:function(e){}},{key:"setAudioTrack",value:function(e){}},{key:"setAudioTracks",value:function(e){}},{key:"seeking",value:function(e){this.seekTime=e}},{key:"skip",value:function(e){if(this.duration){var t=this.currentTime+e;this.seek(Math.min(Math.max(t,0),this.duration))}}}]),e}()).prototype,"playlist",[$e.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{name:"",files:[]}}}),en=zn(Zt.prototype,"currentFileIndex",[$e.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),tn=zn(Zt.prototype,"currentTime",[$e.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),nn=zn(Zt.prototype,"duration",[$e.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),rn=zn(Zt.prototype,"buffered",[$e.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),on=zn(Zt.prototype,"isPlaying",[$e.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),an=zn(Zt.prototype,"isLoading",[$e.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ln=zn(Zt.prototype,"error",[$e.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),cn=zn(Zt.prototype,"volume",[$e.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),un=zn(Zt.prototype,"isMuted",[$e.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),sn=zn(Zt.prototype,"audioTracks",[$e.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),pn=zn(Zt.prototype,"audioTrack",[$e.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),fn=zn(Zt.prototype,"shuffle",[$e.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),yn=zn(Zt.prototype,"seekTime",[$e.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),zn(Zt.prototype,"seeking",[Qt],Object.getOwnPropertyDescriptor(Zt.prototype,"seeking"),Zt.prototype),Zt),Nn=(hn=zn((dn=function(e){function t(){var e,n,r;return Fn(this,t),n=this,r=xn(t).call(this),Rn(e=!r||"object"!==Tn(r)&&"function"!=typeof r?Cn(n):r,"url",hn,Cn(e)),Rn(e,"seekTo",bn,Cn(e)),Rn(e,"source",mn,Cn(e)),Rn(e,"progress",vn,Cn(e)),e.getPlaylistPrefix=function(){return"playlist:".concat(e.playlist.provider,":").concat(e.playlist.id)},e.volume=_n.a.get("volume")||1,e.shuffle=_n.a.get("shuffle")||!1,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Mn(e,t)}(t,e),Dn(t,[{key:"setSource",value:function(e){this.source=e,this.currentTime=e.currentTime||0,this.duration=0,this.buffered=0,this.audioTrack=null,this.audioTracks=[]}},{key:"play",value:function(e){if(this.isPlaying=!0,null!=e)this.currentTime=e,this.seekTo=e,this.seekTime=null;else{var t=parseFloat(_n.a.get("".concat(this.getPlaylistPrefix(),":ts")));this.currentTime=isNaN(t)?0:t}}},{key:"seek",value:function(e){this.seekTo=e,this.seekTime=null}},{key:"resume",value:function(){this.isPlaying=!0}},{key:"pause",value:function(){this.isPlaying=!1}},{key:"onUpdate",value:function(e){var t=e.duration,n=e.buffered,r=e.currentTime;if(t&&(this.duration=t),n&&(this.buffered=n),r&&(this.currentTime=r,this.duration)){var o=Math.max(0,this.duration-60),i=Math.min(o,r);_n.a.set("".concat(this.getPlaylistPrefix(),":ts"),i)}}},{key:"setPlaylist",value:function(e){this.playlist=e,this.selectFile(_n.a.get("".concat(this.getPlaylistPrefix(),":current"))||0),this.play(),this.isPlaying=!1}},{key:"selectFile",value:function(e){var t=this.playlist.files;e<0||e>=t.length||(_n.a.set("".concat(this.getPlaylistPrefix(),":current"),e),this.currentFileIndex=e,this.setSource(t[this.currentFileIndex]))}},{key:"setLoading",value:function(e){this.isLoading=e}},{key:"setError",value:function(e){this.error=e}},{key:"setVolume",value:function(e){this.volume=e,_n.a.set("volume",e)}},{key:"setAudioTrack",value:function(e){this.audioTrack=e}},{key:"setAudioTracks",value:function(e){this.audioTracks=e}},{key:"setShuffle",value:function(e){this.shuffle=e,_n.a.set("shuffle",e)}},{key:"toggleMute",value:function(){this.isMuted=!this.isMuted}}]),t}(Ln)).prototype,"url",[$e.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),bn=zn(dn.prototype,"seekTo",[$e.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),mn=zn(dn.prototype,"source",[$e.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),vn=zn(dn.prototype,"progress",[$e.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),zn(dn.prototype,"setSource",[$e.d],Object.getOwnPropertyDescriptor(dn.prototype,"setSource"),dn.prototype),zn(dn.prototype,"play",[$e.d],Object.getOwnPropertyDescriptor(dn.prototype,"play"),dn.prototype),zn(dn.prototype,"seek",[$e.d],Object.getOwnPropertyDescriptor(dn.prototype,"seek"),dn.prototype),zn(dn.prototype,"resume",[$e.d],Object.getOwnPropertyDescriptor(dn.prototype,"resume"),dn.prototype),zn(dn.prototype,"pause",[$e.d],Object.getOwnPropertyDescriptor(dn.prototype,"pause"),dn.prototype),zn(dn.prototype,"onUpdate",[$e.d],Object.getOwnPropertyDescriptor(dn.prototype,"onUpdate"),dn.prototype),zn(dn.prototype,"setPlaylist",[$e.d],Object.getOwnPropertyDescriptor(dn.prototype,"setPlaylist"),dn.prototype),zn(dn.prototype,"selectFile",[$e.d],Object.getOwnPropertyDescriptor(dn.prototype,"selectFile"),dn.prototype),zn(dn.prototype,"setLoading",[$e.d],Object.getOwnPropertyDescriptor(dn.prototype,"setLoading"),dn.prototype),zn(dn.prototype,"setError",[$e.d],Object.getOwnPropertyDescriptor(dn.prototype,"setError"),dn.prototype),zn(dn.prototype,"setVolume",[$e.d],Object.getOwnPropertyDescriptor(dn.prototype,"setVolume"),dn.prototype),zn(dn.prototype,"setAudioTrack",[$e.d],Object.getOwnPropertyDescriptor(dn.prototype,"setAudioTrack"),dn.prototype),zn(dn.prototype,"setAudioTracks",[$e.d],Object.getOwnPropertyDescriptor(dn.prototype,"setAudioTracks"),dn.prototype),zn(dn.prototype,"setShuffle",[$e.d],Object.getOwnPropertyDescriptor(dn.prototype,"setShuffle"),dn.prototype),zn(dn.prototype,"toggleMute",[$e.d],Object.getOwnPropertyDescriptor(dn.prototype,"toggleMute"),dn.prototype),dn),Vn=new(gn=$e.d.bound,kn=$e.d.bound,wn=$e.d.bound,On=$e.d.bound,Sn=zn((En=function(){function e(){Fn(this,e),Rn(this,"device",Sn,this)}return Dn(e,[{key:"openPlaylist",value:function(e){this.device=new Nn,this.device.setPlaylist(e)}},{key:"switchFile",value:function(e){this.device.selectFile(e),this.device.play()}},{key:"prevFile",value:function(){this.switchFile(this.device.currentFileIndex-1)}},{key:"nextFile",value:function(){this.switchFile(this.device.currentFileIndex+1)}},{key:"endFile",value:function(){var e=this.device,t=e.currentFileIndex,n=e.shuffle,r=e.playlist.files;if(r.length>1&&n){var o;do{o=Math.round(Math.random()*(r.length-1))}while(o==t);this.switchFile(o)}else t==r.length-1?this.device.pause():this.switchFile(this.device.currentFileIndex+1)}},{key:"getPlayerTitle",value:function(){var e=this.device,t=e.playlist,n=t.name,r=t.files,o=e.currentFileIndex;if(n&&r)return n+(r.length>1?" - ".concat(o+1," / ").concat(r.length):"")}}]),e}()).prototype,"device",[$e.l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),zn(En.prototype,"openPlaylist",[$e.d],Object.getOwnPropertyDescriptor(En.prototype,"openPlaylist"),En.prototype),zn(En.prototype,"switchFile",[gn],Object.getOwnPropertyDescriptor(En.prototype,"switchFile"),En.prototype),zn(En.prototype,"prevFile",[kn],Object.getOwnPropertyDescriptor(En.prototype,"prevFile"),En.prototype),zn(En.prototype,"nextFile",[wn],Object.getOwnPropertyDescriptor(En.prototype,"nextFile"),En.prototype),zn(En.prototype,"endFile",[On],Object.getOwnPropertyDescriptor(En.prototype,"endFile"),En.prototype),En),Un={playerStore:Vn},In=n(151);function Wn(e){return(Wn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Hn(e,t){return!t||"object"!==Wn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Bn(e){return(Bn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Gn(e,t){return(Gn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Kn=Object(a.a)({palette:{secondary:{light:l.a.A200,main:l.a[500],dark:l.a[900],contrastText:"#fff"},primary:{light:l.a.A200,main:l.a[500],dark:l.a[900],contrastText:"#fff"},type:"dark"},typography:{useNextVariants:!0},overrides:{MuiLinearProgress:{colorSecondary:{backgroundColor:"transparent"}},MuiMenuItem:{root:{height:"initial"}},MuiListItemIcon:{root:{marginRight:0,minWidth:"30px"}},MuiList:{padding:{paddingTop:0,paddingBottom:0}},MuiDrawer:{paper:{minWidth:"100%","@media (min-width:600px)":{minWidth:"40%"}}}}}),Xn=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Hn(this,Bn(t).apply(this,arguments))}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Gn(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){return o.a.createElement(In.a,{theme:Kn},o.a.createElement(c.a,Un,o.a.createElement(jn,null)))}}])&&qn(n.prototype,r),i&&qn(n,i),t}(r.Component);function Yn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Jn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Qn=new URLSearchParams(window.location.search),Zn=Qn.get("provider"),$n=Qn.get("id");function er(e){e&&console.error(e),document.querySelector("#app .loader").textContent="Can`t load playlist"}Zn&&$n?fetch("".concat(window.API_BASE_URL,"/trackers/").concat(Zn,"/items/").concat(encodeURIComponent($n))).then((function(e){return e.json()})).then((function(e){Vn.openPlaylist(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Yn(Object(n),!0).forEach((function(t){Jn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Yn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({id:$n,provider:Zn},e)),Object(i.render)(o.a.createElement(Xn,null),document.getElementById("app"))})).catch(er):er()},76:function(e,t,n){var r=n(77);"string"==typeof r&&(r=[[e.i,r,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(54)(r,o);r.locals&&(e.exports=r.locals)},77:function(e,t,n){(e.exports=n(53)(!1)).push([e.i,"*{padding:0;margin:0;box-sizing:border-box}html{min-height:100%}.MuiButtonBase-root a{color:rgba(0,0,0,0.87);text-decoration:none}.screan-content{position:fixed;top:0;left:0;right:0;bottom:0}.center{margin:0;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);text-align:center}.vmiddle{vertical-align:middle}.inset{padding-left:32px !important}.player-controls{position:absolute;bottom:0;left:0;right:0;padding-bottom:3px;opacity:1;z-index:3}.player__screen{height:100%;background:black;color:white}.player__player-screen{position:absolute;top:0;left:0;right:0;bottom:0;background:black}.player__player-screen video.scale_hor{position:absolute;top:50%;transform:translateY(-50%);width:100%    !important;height:auto   !important}.player__player-screen video.scale_vert{position:absolute;left:50%;transform:translateX(-50%);width:auto    !important;height:100%   !important}.player-controls__panel{display:flex;justify-content:space-between}.player__file-list{overflow-y:auto;width:100%;position:absolute;right:0;bottom:71px;top:0;opacity:0.8;z-index:2}@media (min-width: 768px){.player__file-list{width:576px}}.shadow-border,.player__title h6{text-shadow:0px 0px 5px rgba(0,0,0,0.8)}.player__title{position:absolute;z-index:1;top:0;left:0;display:flex;align-items:center;padding:5px}.hide-on-mobile{display:none}.hide-on-desktop{display:none}.playback-skip{position:absolute;top:25%;bottom:15%;height:50%;width:30%;z-index:1;touch-action:none}.playback-skip.forward{right:0}.playback-skip.backward{left:0}.playback-skip__indicator{filter:drop-shadow(0px 0px 5px rgba(0,0,0,0.8));color:white;pointer-events:none;position:absolute;top:0;left:0;right:0;height:100%;font-size:72px}.player__pause-zone{position:absolute;top:0;bottom:0;left:0;right:0}.sound-control__slider{width:150px !important;vertical-align:middle;margin:0 5px}.sound-control__mobile{display:flex;align-items:center}.idle{cursor:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=),none;user-select:none}.player__background-cover{background:no-repeat center center fixed;background-size:contain;position:absolute;top:0;bottom:0;left:0;right:0}.player__pause-cover{background-color:rgba(0,0,0,0.7);position:absolute;top:0;bottom:0;left:0;right:0}@media (min-width: 576px){.hide-on-mobile{display:inline-block}}@media (max-width: 576px){.hide-on-desktop{display:inline-block}}\n",""])},84:function(e,t,n){var r=n(85);"string"==typeof r&&(r=[[e.i,r,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(54)(r,o);r.locals&&(e.exports=r.locals)},85:function(e,t,n){(e.exports=n(53)(!1)).push([e.i,'.ui-video-seek-slider{position:relative}.ui-video-seek-slider:focus{outline:none}.ui-video-seek-slider .track{padding:10px 0;cursor:pointer;outline:none}.ui-video-seek-slider .track:focus{border:0;outline:none}.ui-video-seek-slider .track .main{width:100%;height:100%;background-color:rgba(255,255,255,0.2);position:absolute;left:0;top:0;overflow:hidden;transition:transform 0.4s;outline:none}.ui-video-seek-slider .track .main:focus{border:0;outline:none}.ui-video-seek-slider .track .main .seek-hover{position:absolute;background-color:rgba(255,255,255,0.5);width:100%;height:100%;z-index:1;transform:scaleX(0.6);transform-origin:0 0;transition:opacity 0.4s}.ui-video-seek-slider .track .main .buffered{position:absolute;background-color:rgba(255,255,255,0.3);width:100%;height:100%;transform:scaleX(0.8);z-index:2;transform-origin:0 0}.ui-video-seek-slider .track .main .connect{position:absolute;background-color:#f00;width:100%;height:100%;z-index:3;left:0;transform:scaleX(0.13);transform-origin:0 0}.ui-video-seek-slider .time-indicator{z-index:4;position:absolute;text-align:center;width:100%;font-family:"Roboto", "Helvetica", "Arial", sans-serif;font-weight:bold;letter-spacing:0.1em;height:100%;touch-action:none;pointer-events:none;user-select:none}.ui-video-seek-slider{display:block}\n',""])}});